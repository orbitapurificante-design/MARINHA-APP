<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{font-family:sans-serif;padding:20px;background:#f4f1ec}
button{padding:12px 20px;background:#0a1628;color:#fff;border:none;border-radius:10px;font-size:15px;cursor:pointer;margin:6px 4px;display:inline-block}
#log{background:#fff;border-radius:10px;padding:14px;margin-top:16px;font-size:13px;line-height:2}
img{max-width:150px;max-height:150px;border-radius:8px;display:block;margin:4px 0;border:2px solid #0a1628}
</style>
</head>
<body>
<h2>üîç Ver dados Supabase</h2>
<button onclick="verPromos()">Ver PROMOS (com foto?)</button>
<button onclick="verFolhetos()">Ver FOLHETOS (com imagem?)</button>
<div id="log">Clique num bot√£o...</div>

<script>
var SB='https://opzmuzogxfzeqwjxmfvc.supabase.co';
var SK='sb_publishable_e_Bd_rx2rfzBeIrbyGxCwA_SfXklv4s';
function hd(){return{'apikey':SK,'Authorization':'Bearer '+SK};}
var L=document.getElementById('log');
function log(h){L.innerHTML+=h+'<br>';}
function clr(){L.innerHTML='';}

async function verPromos(){
  clr();log('A buscar promos...');
  var r=await fetch(SB+'/rest/v1/promos?select=*',{headers:hd()});
  var d=await r.json();
  log('<b>Total promos: '+d.length+'</b>');
  d.forEach(function(p){
    log('---');
    log('<b>'+p.nome+'</b> | id: '+p.id);
    log('preco_orig: '+p.preco_orig+' | preco_novo: '+p.preco_novo);
    log('emoji: '+(p.emoji||'nenhum'));
    var fLen=p.foto?p.foto.length:0;
    log('foto: '+(fLen>0?'SIM ('+fLen+' chars)':'<span style="color:red">N√ÉO / VAZIO</span>'));
    if(p.foto&&p.foto.length>100){
      log('In√≠cio da foto: '+p.foto.slice(0,80));
      log('<img src="'+p.foto+'">');
    }
  });
  if(!d.length)log('<span style="color:red">NENHUMA PROMO NA BASE DE DADOS</span>');
}

async function verFolhetos(){
  clr();log('A buscar folhetos...');
  var r=await fetch(SB+'/rest/v1/folhetos?select=*',{headers:hd()});
  var d=await r.json();
  log('<b>Total folhetos: '+d.length+'</b>');
  d.forEach(function(f){
    log('---');
    log('<b>'+f.nome+'</b> | id: '+f.id);
    var dLen=f.data?f.data.length:0;
    log('data: '+(dLen>0?'SIM ('+dLen+' chars)':'<span style="color:red">N√ÉO / VAZIO</span>'));
    if(f.data&&f.data.length>100){
      log('In√≠cio: '+f.data.slice(0,80));
      log('<img src="'+f.data+'">');
    }
  });
  if(!d.length)log('<span style="color:red">NENHUM FOLHETO NA BASE DE DADOS</span>');
}
</script>
</body>
</html>
